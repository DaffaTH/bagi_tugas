"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _objectWithoutProperties(t,e){if(null==t)return{};var r,o,n=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)r=a[o],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};var r,o,n={},a=Object.keys(t);for(o=0;o<a.length;o++)r=a[o],e.indexOf(r)>=0||(n[r]=t[r]);return n}var $link=document.querySelector('link[href*="main.css"]');$link&&console.info("Version: "+($link.href||"").split("?v=")[1]);var PREVMONTHSTART=moment().subtract(1,"months").startOf("month"),CURRMONTHSTART=moment().startOf("month"),CURRMONTHEND=moment().endOf("month"),PEGAWAIBYNIP=PEGAWAI?PEGAWAI.reduce(function(t,e){var r=e.nipbps,o=_objectWithoutProperties(e,["nipbps"]);return t[r]=o,t},{}):{},enumerateDays=function(t,e){for(var r=[],o=moment(t).startOf("day").subtract(1,"days"),n=moment(e).startOf("day");o.add(1,"days").diff(n)<=0;)r.push(o.clone().toDate());return r};$(function(){$('[data-toggle="tooltip"]').tooltip(),$(document).on("click",'[data-toggle="lightbox"]',function(t){t.preventDefault(),$(this).ekkoLightbox()})});var renderChart=function(t){var e=t.id,r=t.categories,o=void 0===r?[]:r,n=t.series,a=void 0===n?[]:n,i=t.plotOptions,l=void 0===i?{}:i,c=t.tooltip;$("#"+e).css("height",100*Math.pow(o.length,.6)-200),Highcharts.chart(e,{chart:{type:"bar"},title:{text:""},xAxis:{categories:o},yAxis:{min:0,title:{text:"Jumlah Hari Tugas"},labels:{style:{color:"#999"}},allowDecimals:!1},plotOptions:{series:_objectSpread({stacking:"normal",groupPadding:0},l)},series:a,tooltip:c,legend:{enabled:!1},credits:{enabled:!1}})},chartData;if(PEGAWAI){var data=[PEGAWAI.reduce(function(t,e){return t[e.nipbps]=[0],t},{}),PEGAWAI.reduce(function(t,e){return t[e.nipbps]=[0,0,0],t},{})];SURAT.forEach(function(t){var e=t.pelaksana,r=t.tgl_mulai,o=t.tgl_akhir,n=enumerateDays(r,o);PEGAWAI.forEach(function(t){var r=t.nipbps;e.includes(r)&&n.forEach(function(t){moment(t).isBetween(PREVMONTHSTART,CURRMONTHSTART,"day","[)")&&data[0][r][0]++,moment(t).isBetween(CURRMONTHSTART,moment(),"day","[)")&&(data[1][r][0]++,data[1][r][1]++),moment(t).isBetween(moment(),CURRMONTHEND,"day","[]")&&(data[1][r][0]++,data[1][r][2]++)})})}),data=data.map(function(t){return Object.keys(t).map(function(e){return[PEGAWAIBYNIP[e].nama].concat(_toConsumableArray(t[e]))}).sort(function(t,e){return e[1]-t[1]})}),chartData=[{id:"chart-bulan-lalu",categories:data[0].map(function(t){return t[0]}),series:[{name:"Selesai",data:data[0].map(function(t){return t[1]})}],plotOptions:{color:"#31ce36",states:{hover:{color:"#45d249"}}},tooltip:{formatter:function(){return"<b>"+this.y+" hari</b>"}}},{id:"chart-bulan-ini",categories:data[1].map(function(t){return t[0]}),series:[{name:"Belum selesai",data:data[1].map(function(t){return t[3]}),color:"#48abf7",states:{hover:{color:"#59b3f7"}}},{name:"Selesai",data:data[1].map(function(t){return t[2]})}],plotOptions:{color:"#1572e8",states:{hover:{color:"#2b7fea"}}},tooltip:{shared:!0,valueSuffix:" hari"}}]}var urlParams=new URLSearchParams(window.location.search),urlBase=(document.getElementsByTagName("base")[0]||{}).href,urlPath=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?window.location.href.split("?")[0].split("#")[0].split(urlBase).join(""):t===window.location.href.split("?")[0].split(urlBase).join("")},urlHost=window.location.host,$routes=$("[data-route]"),route=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];window.scrollTo(0,0);var r=$('[data-route="'.concat(t,'"]'));0===r.length&&(r=$('[data-route="404"]')),$routes.hide(),r.show(),document.title=r.data("title");var o=window.location.href.split("?")[0].split("#")[1];o&&$("#"+o).length&&$("html, body").animate({scrollTop:$("#"+o).offset().top-62},500),e&&window.history.pushState(null,document.title,urlBase+t),PEGAWAI&&"statistik"===t&&SURAT.length&&chartData.forEach(function(t){return renderChart(t)})};window.onpopstate=function(t){route(urlPath(),!1)},$(function(){$(document).on("click",'[data-custom-link][data-group="static-page"]',function(t){t.preventDefault();var e=$(this).attr("href");urlPath(e)||route(e)}),route(urlPath(),!1)});